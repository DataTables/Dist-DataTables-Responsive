/*!
 Responsive 2.0.1-dev
 2014-2015 SpryMedia Ltd - datatables.net/license
*/
(function(c){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(m){return c(m,window,document)}):"object"===typeof exports?module.exports=function(m,l){m||(m=window);if(!l||!l.fn.dataTable)l=require("datatables.net")(m,l).$;return c(l,m,m.document)}:c(jQuery,window,document)})(function(c,m,l,q){var o=c.fn.dataTable,k=function(a,b){if(!o.versionCheck||!o.versionCheck("1.10.3"))throw"DataTables Responsive requires DataTables 1.10.3 or newer";this.s={dt:new o.Api(a),columns:[],
current:[]};this.s.dt.settings()[0].responsive||(b&&"string"===typeof b.details&&(b.details={type:b.details}),this.c=c.extend(!0,{},k.defaults,o.defaults.responsive,b),a.responsive=this,this._constructor())};c.extend(k.prototype,{_constructor:function(){var a=this,b=this.s.dt,d=b.settings()[0];b.settings()[0]._responsive=this;c(m).on("resize.dtr orientationchange.dtr",o.util.throttle(function(){a._resize()}));d.oApi._fnCallbackReg(d,"aoRowCreatedCallback",function(f){-1!==c.inArray(!1,a.s.current)&&
c("td, th",f).each(function(f){f=b.column.index("toData",f);!1===a.s.current[f]&&c(this).css("display","none")})});b.on("destroy.dtr",function(){b.off(".dtr");c(b.table().body()).off(".dtr");c(m).off("resize.dtr orientationchange.dtr");c.each(a.s.current,function(f,b){!1===b&&a._setColumnVis(f,!0)})});this.c.breakpoints.sort(function(a,b){return a.width<b.width?1:a.width>b.width?-1:0});this._classLogic();this._resizeAuto();d=this.c.details;!1!==d.type&&(a._detailsInit(),b.on("column-visibility.dtr",
function(){a._classLogic();a._resizeAuto();a._resize()}),b.on("draw.dtr",function(){a._redrawChildren()}),c(b.table().node()).addClass("dtr-"+d.type));b.on("column-reorder.dtr",function(b,c,d){if(d.drop){a._classLogic();a._resizeAuto();a._resize()}});b.on("init.dtr",function(){a._resizeAuto();a._resize()});this._resize()},_columnsVisiblity:function(a){var b=this.s.dt,d=this.s.columns,f,g,h=d.map(function(a,b){return{columnIdx:b,priority:a.priority}}).sort(function(a,b){return a.priority!==b.priority?
a.priority-b.priority:a.columnIdx-b.columnIdx}),i=c.map(d,function(b){return b.auto&&null===b.minWidth?!1:!0===b.auto?"-":-1!==c.inArray(a,b.includeIn)}),n=0;f=0;for(g=i.length;f<g;f++)!0===i[f]&&(n+=d[f].minWidth);f=b.settings()[0].oScroll;f=f.sY||f.sX?f.iBarWidth:0;b=b.table().container().offsetWidth-f-n;f=0;for(g=i.length;f<g;f++)d[f].control&&(b-=d[f].minWidth);n=!1;f=0;for(g=h.length;f<g;f++){var j=h[f].columnIdx;"-"===i[j]&&(!d[j].control&&d[j].minWidth)&&(n||0>b-d[j].minWidth?(n=!0,i[j]=!1):
i[j]=!0,b-=d[j].minWidth)}h=!1;f=0;for(g=d.length;f<g;f++)if(!d[f].control&&!d[f].never&&!i[f]){h=!0;break}f=0;for(g=d.length;f<g;f++)d[f].control&&(i[f]=h);-1===c.inArray(!0,i)&&(i[0]=!0);return i},_classLogic:function(){var a=this,b=this.c.breakpoints,d=this.s.dt,f=d.columns().eq(0).map(function(a){var b=this.column(a),f=b.header().className,a=d.settings()[0].aoColumns[a].responsivePriority;a===q&&(b=c(b.header()).data("priority"),a=b!==q?1*b:1E4);return{className:f,includeIn:[],auto:!1,control:!1,
never:f.match(/\bnever\b/)?!0:!1,priority:a}}),g=function(a,b){var d=f[a].includeIn;-1===c.inArray(b,d)&&d.push(b)},h=function(d,c,j,h){if(j)if("max-"===j){h=a._find(c).width;c=0;for(j=b.length;c<j;c++)b[c].width<=h&&g(d,b[c].name)}else if("min-"===j){h=a._find(c).width;c=0;for(j=b.length;c<j;c++)b[c].width>=h&&g(d,b[c].name)}else{if("not-"===j){c=0;for(j=b.length;c<j;c++)-1===b[c].name.indexOf(h)&&g(d,b[c].name)}}else f[d].includeIn.push(c)};f.each(function(a,f){for(var d=a.className.split(" "),
g=!1,k=0,m=d.length;k<m;k++){var l=c.trim(d[k]);if("all"===l){g=!0;a.includeIn=c.map(b,function(a){return a.name});return}if("none"===l||a.never){g=!0;return}if("control"===l){g=!0;a.control=!0;return}c.each(b,function(a,b){var c=b.name.split("-"),d=l.match(RegExp("(min\\-|max\\-|not\\-)?("+c[0]+")(\\-[_a-zA-Z0-9])?"));d&&(g=!0,d[2]===c[0]&&d[3]==="-"+c[1]?h(f,b.name,d[1],d[2]+d[3]):d[2]===c[0]&&!d[3]&&h(f,b.name,d[1],d[2]))})}g||(a.auto=!0)});this.s.columns=f},_detailsDisplay:function(a,b){var d=
this,f=this.s.dt,g=this.c.details;if(g&&g.type){var h=g.display(a,b,function(){return g.renderer(f,a[0],d._detailsObj(a[0]))});(!0===h||!1===h)&&c(f.table().node()).triggerHandler("responsive-display.dt",[f,a,h,b])}},_detailsInit:function(){var a=this,b=this.s.dt,d=this.c.details;"inline"===d.type&&(d.target="td:first-child");b.on("draw.dtr",function(){a._tabIndexes()});a._tabIndexes();c(b.table().body()).on("keyup.dtr","td",function(a){a.keyCode===13&&c(this).data("dtr-keyboard")&&c(this).click()});
var f=d.target;c(b.table().body()).on("click.dtr mousedown.dtr","string"===typeof f?f:"td",function(){if(c(b.table().node()).hasClass("collapsed")&&b.row(c(this).closest("tr")).length){if(typeof f==="number"){var d=f<0?b.columns().eq(0).length+f:f;if(b.cell(this).index().column!==d)return}d=b.row(c(this).closest("tr"));e.type==="click"?a._detailsDisplay(d,false):e.type==="mousedown"&&e.preventDefault()}})},_detailsObj:function(a){var b=this,d=this.s.dt;return c.map(this.s.columns,function(c,g){if(!c.never)return{title:d.settings()[0].aoColumns[g].sTitle,
data:d.cell(a,g).render(b.c.orthogonal),hidden:d.column(g).visible()&&!b.s.current[g],columnIdx:g}})},_find:function(a){for(var b=this.c.breakpoints,c=0,f=b.length;c<f;c++)if(b[c].name===a)return b[c]},_redrawChildren:function(){var a=this,b=this.s.dt;b.rows({page:"current"}).iterator("row",function(c,f){b.row(f);a._detailsDisplay(b.row(f),!0)})},_resize:function(){var a=this,b=this.s.dt,d=c(m).width(),f=this.c.breakpoints,g=f[0].name,h=this.s.columns,i,n=this.s.current.slice();for(i=f.length-1;0<=
i;i--)if(d<=f[i].width){g=f[i].name;break}var j=this._columnsVisiblity(g);this.s.current=j;f=!1;i=0;for(d=h.length;i<d;i++)if(!1===j[i]&&!h[i].never&&!h[i].control){f=!0;break}c(b.table().node()).toggleClass("collapsed",f);var k=!1;b.columns().eq(0).each(function(b,c){j[c]!==n[c]&&(k=!0,a._setColumnVis(b,j[c]))});k&&(this._redrawChildren(),c(b.table().node()).trigger("responsive-resize.dt",[b,this.s.current]))},_resizeAuto:function(){var a=this.s.dt,b=this.s.columns;if(this.c.auto&&-1!==c.inArray(!0,
c.map(b,function(a){return a.auto}))){a.table().node();var d=a.table().node().cloneNode(!1),f=c(a.table().header().cloneNode(!1)).appendTo(d),g=c(a.table().body().cloneNode(!1)).appendTo(d),h=a.columns().header().filter(function(b){return a.column(b).visible()}).to$().clone(!1).css("display","table-cell");c(g).append(c(a.rows({page:"current"}).nodes()).clone(!1)).find("th, td").css("display","");if(g=a.table().footer()){var g=c(g.cloneNode(!1)).appendTo(d),i=a.columns().header().filter(function(b){return a.column(b).visible()}).to$().clone(!1).css("display",
"table-cell");c("<tr/>").append(i).appendTo(g)}c("<tr/>").append(h).appendTo(f);"inline"===this.c.details.type&&c(d).addClass("dtr-inline collapsed");d=c("<div/>").css({width:1,height:1,overflow:"hidden"}).append(d);d.insertBefore(a.table().node());h.each(function(c){c=a.column.index("fromVisible",c);b[c].minWidth=this.offsetWidth||0});d.remove()}},_setColumnVis:function(a,b){var d=this.s.dt,f=b?"":"none";c(d.column(a).header()).css("display",f);c(d.column(a).footer()).css("display",f);d.column(a).nodes().to$().css("display",
f)},_tabIndexes:function(){var a=this.s.dt,b=a.cells({page:"current"}).nodes().to$(),d=a.settings()[0],f=this.c.details.target;b.filter("[data-dtr-keyboard]").removeData("[data-dtr-keyboard]");c("number"===typeof f?":eq("+f+")":f,a.rows({page:"current"}).nodes()).attr("tabIndex",d.iTabIndex).data("dtr-keyboard",1)}});k.breakpoints=[{name:"desktop",width:Infinity},{name:"tablet-l",width:1024},{name:"tablet-p",width:768},{name:"mobile-l",width:480},{name:"mobile-p",width:320}];k.display={childRow:function(a,
b,d){if(b){if(c(a.node()).hasClass("parent"))return a.child(d(),"child").show(),!0}else{if(a.child.isShown())return a.child(!1),c(a.node()).removeClass("parent"),!1;a.child(d(),"child").show();c(a.node()).addClass("parent");return!0}},childRowImmediate:function(a,b,d){if(!b&&a.child.isShown()||!a.responsive.hasHidden())return a.child(!1),c(a.node()).removeClass("parent"),!1;a.child(d(),"child").show();c(a.node()).addClass("parent");return!0},modal:function(a){return function(b,d,f){if(d)c("div.dtr-modal-content").empty().append(f());
else{var g=function(){h.remove();c(l).off("keypress.dtr")},h=c('<div class="dtr-modal"/>').append(c('<div class="dtr-modal-display"/>').append(c('<div class="dtr-modal-content"/>').append(f())).append(c('<div class="dtr-modal-close">&times;</div>').click(function(){g()}))).append(c('<div class="dtr-modal-background"/>').click(function(){g()})).appendTo("body");a&&a.header&&h.find("div.dtr-modal-content").prepend("<h2>"+a.header(b)+"</h2>");c(l).on("keyup.dtr",function(a){27===a.keyCode&&(a.stopPropagation(),
g())})}}}};k.defaults={breakpoints:k.breakpoints,auto:!0,details:{display:k.display.childRow,renderer:function(a,b,d){return(a=c.map(d,function(a){return a.hidden?'<li data-dtr-index="'+a.columnIdx+'"><span class="dtr-title">'+a.title+'</span> <span class="dtr-data">'+a.data+"</span></li>":""}).join(""))?c('<ul data-dtr-index="'+b+'"/>').append(a):!1},target:0,type:"inline"},orthogonal:"display"};var p=c.fn.dataTable.Api;p.register("responsive()",function(){return this});p.register("responsive.index()",
function(a){a=c(a);return{column:a.data("dtr-index"),row:a.parent().data("dtr-index")}});p.register("responsive.rebuild()",function(){return this.iterator("table",function(a){a._responsive&&a._responsive._classLogic()})});p.register("responsive.recalc()",function(){return this.iterator("table",function(a){a._responsive&&(a._responsive._resizeAuto(),a._responsive._resize())})});p.register("responsive.hasHidden()",function(){var a=this.context[0];return a._responsive?-1!==c.inArray(!1,a._responsive.s.current):
!1});k.version="2.0.1-dev";c.fn.dataTable.Responsive=k;c.fn.DataTable.Responsive=k;c(l).on("preInit.dt.dtr",function(a,b){if("dt"===a.namespace&&(c(b.nTable).hasClass("responsive")||c(b.nTable).hasClass("dt-responsive")||b.oInit.responsive||o.defaults.responsive)){var d=b.oInit.responsive;!1!==d&&new k(b,c.isPlainObject(d)?d:{})}});return k});
